{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _reactClickOutside = require('react-click-outside');\n\nvar _reactClickOutside2 = _interopRequireDefault(_reactClickOutside);\n\nvar _libs = require('../../libs');\n\nvar _input = require('../input');\n\nvar _input2 = _interopRequireDefault(_input);\n\nvar _Suggestions = require('./Suggestions');\n\nvar _Suggestions2 = _interopRequireDefault(_Suggestions);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nvar AutoComplete = function (_Component) {\n  (0, _inherits3.default)(AutoComplete, _Component);\n\n  function AutoComplete(props) {\n    (0, _classCallCheck3.default)(this, AutoComplete);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (AutoComplete.__proto__ || Object.getPrototypeOf(AutoComplete)).call(this, props));\n\n    _this.state = {\n      inputValue: props.value,\n      isFocus: false,\n      suggestions: [],\n      loading: false,\n      highlightedIndex: -1\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(AutoComplete, [{\n    key: 'getChildContext',\n    value: function getChildContext() {\n      return {\n        component: this\n      };\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(props) {\n      this.setState({\n        inputValue: props.value\n      });\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      var _this2 = this;\n\n      var visible = this.suggestionVisible();\n\n      var reference = _reactDom2.default.findDOMNode(this.inputNode);\n\n      if (reference instanceof HTMLElement) {\n        setTimeout(function () {\n          _this2.suggestionsNode.onVisibleChange(visible, reference.offsetWidth);\n        });\n      }\n    }\n  }, {\n    key: 'getData',\n    value: function getData(queryString) {\n      var _this3 = this;\n\n      this.setState({\n        loading: true\n      });\n      this.props.fetchSuggestions(queryString, function (suggestions) {\n        _this3.setState({\n          loading: false\n        });\n\n        if (Array.isArray(suggestions)) {\n          _this3.setState({\n            suggestions: suggestions\n          });\n        }\n      });\n    }\n  }, {\n    key: 'handleChange',\n    value: function handleChange(value) {\n      this.setState({\n        inputValue: value\n      });\n\n      if (!this.props.triggerOnFocus && !value) {\n        this.setState({\n          suggestions: []\n        });\n        return;\n      }\n\n      if (this.props.onChange) {\n        this.props.onChange(value);\n      }\n\n      this.getData(value);\n    }\n  }, {\n    key: 'handleFocus',\n    value: function handleFocus(e) {\n      this.setState({\n        isFocus: true\n      });\n      if (this.props.onFocus) this.props.onFocus(e);\n\n      if (this.props.triggerOnFocus) {\n        this.getData(this.state.inputValue);\n      }\n    }\n  }, {\n    key: 'handleKeyEnter',\n    value: function handleKeyEnter(highlightedIndex) {\n      if (this.suggestionVisible() && highlightedIndex >= 0 && highlightedIndex < this.state.suggestions.length) {\n        this.select(this.state.suggestions[highlightedIndex]);\n      }\n    }\n  }, {\n    key: 'handleClickOutside',\n    value: function handleClickOutside() {\n      if (this.state.isFocus) {\n        this.setState({\n          isFocus: false\n        });\n      }\n    }\n  }, {\n    key: 'select',\n    value: function select(item) {\n      var _this4 = this;\n\n      this.setState({\n        inputValue: item.value\n      }, function () {\n        _this4.setState({\n          suggestions: []\n        });\n      });\n\n      if (this.props.onSelect) {\n        this.props.onSelect(item);\n      }\n    }\n  }, {\n    key: 'highlight',\n    value: function highlight(index) {\n      if (!this.suggestionVisible() || this.state.loading) return;\n      if (index < 0) index = 0;\n\n      if (index >= this.state.suggestions.length) {\n        index = this.state.suggestions.length - 1;\n      }\n\n      var reference = _reactDom2.default.findDOMNode(this.suggestionsNode);\n\n      if (reference instanceof HTMLElement) {\n        var suggestion = document.querySelector('.el-autocomplete-suggestion__wrap');\n        var suggestionList = document.querySelectorAll('.el-autocomplete-suggestion__list li');\n\n        if (suggestion instanceof HTMLElement && suggestionList instanceof NodeList) {\n          var highlightItem = suggestionList[index];\n          var scrollTop = suggestion.scrollTop;\n          var offsetTop = highlightItem.offsetTop;\n\n          if (offsetTop + highlightItem.scrollHeight > scrollTop + suggestion.clientHeight) {\n            suggestion.scrollTop += highlightItem.scrollHeight;\n          }\n\n          if (offsetTop < scrollTop) {\n            suggestion.scrollTop -= highlightItem.scrollHeight;\n          }\n\n          this.setState({\n            highlightedIndex: index\n          });\n        }\n      }\n    }\n    /* Computed Methods */\n\n  }, {\n    key: 'suggestionVisible',\n    value: function suggestionVisible() {\n      var suggestions = this.state.suggestions;\n      var isValidData = Array.isArray(suggestions) && suggestions.length > 0;\n      return (isValidData || this.state.loading) && this.state.isFocus;\n    }\n  }, {\n    key: 'onKeyDown',\n    value: function onKeyDown(e) {\n      var highlightedIndex = this.state.highlightedIndex;\n\n      switch (e.keyCode) {\n        case 13:\n          this.handleKeyEnter(highlightedIndex);\n          break;\n\n        case 38:\n          this.highlight(highlightedIndex - 1);\n          break;\n\n        case 40:\n          this.highlight(highlightedIndex + 1);\n          break;\n\n        default:\n          break;\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this5 = this;\n\n      var _props = this.props,\n          disabled = _props.disabled,\n          placeholder = _props.placeholder,\n          name = _props.name,\n          size = _props.size,\n          icon = _props.icon,\n          append = _props.append,\n          prepend = _props.prepend,\n          onIconClick = _props.onIconClick,\n          popperClass = _props.popperClass;\n      var _state = this.state,\n          inputValue = _state.inputValue,\n          suggestions = _state.suggestions;\n      return _react2.default.createElement('div', {\n        style: this.style(),\n        className: this.className('el-autocomplete')\n      }, _react2.default.createElement(_input2.default, {\n        ref: function ref(node) {\n          return _this5.inputNode = node;\n        },\n        value: inputValue,\n        disabled: disabled,\n        placeholder: placeholder,\n        name: name,\n        size: size,\n        icon: icon,\n        prepend: prepend,\n        append: append,\n        onIconClick: onIconClick,\n        onChange: this.handleChange.bind(this),\n        onFocus: this.handleFocus.bind(this),\n        onBlur: this.props.onBlur,\n        onKeyDown: this.onKeyDown.bind(this)\n      }), _react2.default.createElement(_Suggestions2.default, {\n        ref: function ref(node) {\n          return _this5.suggestionsNode = node;\n        },\n        className: this.classNames(popperClass),\n        suggestions: suggestions\n      }));\n    }\n  }, {\n    key: '__reactstandin__regenerateByEval',\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n  return AutoComplete;\n}(_libs.Component);\n\nAutoComplete.defaultProps = {\n  triggerOnFocus: true\n};\nAutoComplete.childContextTypes = {\n  component: _libs.PropTypes.any\n};\n\nvar _default = (0, _reactClickOutside2.default)(AutoComplete);\n\nexports.default = _default;\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(AutoComplete, 'AutoComplete', 'src/auto-complete/AutoComplete.jsx');\n  reactHotLoader.register(_default, 'default', 'src/auto-complete/AutoComplete.jsx');\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["D:/Exercises/HTML/DOM/Test/node_modules/element-react/dist/npm/es5/src/auto-complete/AutoComplete.js"],"names":["Object","defineProperty","exports","value","_classCallCheck2","require","_classCallCheck3","_interopRequireDefault","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_react","_react2","_reactDom","_reactDom2","_reactClickOutside","_reactClickOutside2","_libs","_input","_input2","_Suggestions","_Suggestions2","obj","__esModule","default","enterModule","reactHotLoaderGlobal","module","AutoComplete","_Component","props","_this","__proto__","getPrototypeOf","call","state","inputValue","isFocus","suggestions","loading","highlightedIndex","key","getChildContext","component","componentWillReceiveProps","setState","componentDidUpdate","_this2","visible","suggestionVisible","reference","findDOMNode","inputNode","HTMLElement","setTimeout","suggestionsNode","onVisibleChange","offsetWidth","getData","queryString","_this3","fetchSuggestions","Array","isArray","handleChange","triggerOnFocus","onChange","handleFocus","e","onFocus","handleKeyEnter","length","select","handleClickOutside","item","_this4","onSelect","highlight","index","suggestion","document","querySelector","suggestionList","querySelectorAll","NodeList","highlightItem","scrollTop","offsetTop","scrollHeight","clientHeight","isValidData","onKeyDown","keyCode","render","_this5","_props","disabled","placeholder","name","size","icon","append","prepend","onIconClick","popperClass","_state","createElement","style","className","ref","node","bind","onBlur","classNames","__reactstandin__regenerateByEval","code","eval","Component","defaultProps","childContextTypes","PropTypes","any","_default","reactHotLoader","register","leaveModule"],"mappings":"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","sourcesContent":["'use strict';\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\n\r\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\r\n\r\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\r\n\r\nvar _createClass2 = require('babel-runtime/helpers/createClass');\r\n\r\nvar _createClass3 = _interopRequireDefault(_createClass2);\r\n\r\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\r\n\r\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\r\n\r\nvar _inherits2 = require('babel-runtime/helpers/inherits');\r\n\r\nvar _inherits3 = _interopRequireDefault(_inherits2);\r\n\r\nvar _react = require('react');\r\n\r\nvar _react2 = _interopRequireDefault(_react);\r\n\r\nvar _reactDom = require('react-dom');\r\n\r\nvar _reactDom2 = _interopRequireDefault(_reactDom);\r\n\r\nvar _reactClickOutside = require('react-click-outside');\r\n\r\nvar _reactClickOutside2 = _interopRequireDefault(_reactClickOutside);\r\n\r\nvar _libs = require('../../libs');\r\n\r\nvar _input = require('../input');\r\n\r\nvar _input2 = _interopRequireDefault(_input);\r\n\r\nvar _Suggestions = require('./Suggestions');\r\n\r\nvar _Suggestions2 = _interopRequireDefault(_Suggestions);\r\n\r\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n\r\n(function () {\r\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\r\n  enterModule && enterModule(module);\r\n})();\r\n\r\nvar AutoComplete = function (_Component) {\r\n  (0, _inherits3.default)(AutoComplete, _Component);\r\n\r\n  function AutoComplete(props) {\r\n    (0, _classCallCheck3.default)(this, AutoComplete);\r\n\r\n    var _this = (0, _possibleConstructorReturn3.default)(this, (AutoComplete.__proto__ || Object.getPrototypeOf(AutoComplete)).call(this, props));\r\n\r\n    _this.state = {\r\n      inputValue: props.value,\r\n      isFocus: false,\r\n      suggestions: [],\r\n      loading: false,\r\n      highlightedIndex: -1\r\n    };\r\n    return _this;\r\n  }\r\n\r\n  (0, _createClass3.default)(AutoComplete, [{\r\n    key: 'getChildContext',\r\n    value: function getChildContext() {\r\n      return {\r\n        component: this\r\n      };\r\n    }\r\n  }, {\r\n    key: 'componentWillReceiveProps',\r\n    value: function componentWillReceiveProps(props) {\r\n      this.setState({ inputValue: props.value });\r\n    }\r\n  }, {\r\n    key: 'componentDidUpdate',\r\n    value: function componentDidUpdate() {\r\n      var _this2 = this;\r\n\r\n      var visible = this.suggestionVisible();\r\n      var reference = _reactDom2.default.findDOMNode(this.inputNode);\r\n\r\n      if (reference instanceof HTMLElement) {\r\n        setTimeout(function () {\r\n          _this2.suggestionsNode.onVisibleChange(visible, reference.offsetWidth);\r\n        });\r\n      }\r\n    }\r\n  }, {\r\n    key: 'getData',\r\n    value: function getData(queryString) {\r\n      var _this3 = this;\r\n\r\n      this.setState({ loading: true });\r\n\r\n      this.props.fetchSuggestions(queryString, function (suggestions) {\r\n        _this3.setState({ loading: false });\r\n\r\n        if (Array.isArray(suggestions)) {\r\n          _this3.setState({ suggestions: suggestions });\r\n        }\r\n      });\r\n    }\r\n  }, {\r\n    key: 'handleChange',\r\n    value: function handleChange(value) {\r\n      this.setState({ inputValue: value });\r\n\r\n      if (!this.props.triggerOnFocus && !value) {\r\n        this.setState({ suggestions: [] });return;\r\n      }\r\n\r\n      if (this.props.onChange) {\r\n        this.props.onChange(value);\r\n      }\r\n\r\n      this.getData(value);\r\n    }\r\n  }, {\r\n    key: 'handleFocus',\r\n    value: function handleFocus(e) {\r\n      this.setState({ isFocus: true });\r\n      if (this.props.onFocus) this.props.onFocus(e);\r\n      if (this.props.triggerOnFocus) {\r\n        this.getData(this.state.inputValue);\r\n      }\r\n    }\r\n  }, {\r\n    key: 'handleKeyEnter',\r\n    value: function handleKeyEnter(highlightedIndex) {\r\n      if (this.suggestionVisible() && highlightedIndex >= 0 && highlightedIndex < this.state.suggestions.length) {\r\n        this.select(this.state.suggestions[highlightedIndex]);\r\n      }\r\n    }\r\n  }, {\r\n    key: 'handleClickOutside',\r\n    value: function handleClickOutside() {\r\n      if (this.state.isFocus) {\r\n        this.setState({ isFocus: false });\r\n      }\r\n    }\r\n  }, {\r\n    key: 'select',\r\n    value: function select(item) {\r\n      var _this4 = this;\r\n\r\n      this.setState({ inputValue: item.value }, function () {\r\n        _this4.setState({ suggestions: [] });\r\n      });\r\n\r\n      if (this.props.onSelect) {\r\n        this.props.onSelect(item);\r\n      }\r\n    }\r\n  }, {\r\n    key: 'highlight',\r\n    value: function highlight(index) {\r\n      if (!this.suggestionVisible() || this.state.loading) return;\r\n      if (index < 0) index = 0;\r\n      if (index >= this.state.suggestions.length) {\r\n        index = this.state.suggestions.length - 1;\r\n      }\r\n      var reference = _reactDom2.default.findDOMNode(this.suggestionsNode);\r\n      if (reference instanceof HTMLElement) {\r\n        var suggestion = document.querySelector('.el-autocomplete-suggestion__wrap');\r\n        var suggestionList = document.querySelectorAll('.el-autocomplete-suggestion__list li');\r\n        if (suggestion instanceof HTMLElement && suggestionList instanceof NodeList) {\r\n          var highlightItem = suggestionList[index];\r\n          var scrollTop = suggestion.scrollTop;\r\n          var offsetTop = highlightItem.offsetTop;\r\n\r\n          if (offsetTop + highlightItem.scrollHeight > scrollTop + suggestion.clientHeight) {\r\n            suggestion.scrollTop += highlightItem.scrollHeight;\r\n          }\r\n\r\n          if (offsetTop < scrollTop) {\r\n            suggestion.scrollTop -= highlightItem.scrollHeight;\r\n          }\r\n\r\n          this.setState({ highlightedIndex: index });\r\n        }\r\n      }\r\n    }\r\n\r\n    /* Computed Methods */\r\n\r\n  }, {\r\n    key: 'suggestionVisible',\r\n    value: function suggestionVisible() {\r\n      var suggestions = this.state.suggestions;\r\n      var isValidData = Array.isArray(suggestions) && suggestions.length > 0;\r\n\r\n      return (isValidData || this.state.loading) && this.state.isFocus;\r\n    }\r\n  }, {\r\n    key: 'onKeyDown',\r\n    value: function onKeyDown(e) {\r\n      var highlightedIndex = this.state.highlightedIndex;\r\n\r\n\r\n      switch (e.keyCode) {\r\n        case 13:\r\n          this.handleKeyEnter(highlightedIndex);\r\n          break;\r\n        case 38:\r\n          this.highlight(highlightedIndex - 1);\r\n          break;\r\n        case 40:\r\n          this.highlight(highlightedIndex + 1);\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n  }, {\r\n    key: 'render',\r\n    value: function render() {\r\n      var _this5 = this;\r\n\r\n      var _props = this.props,\r\n          disabled = _props.disabled,\r\n          placeholder = _props.placeholder,\r\n          name = _props.name,\r\n          size = _props.size,\r\n          icon = _props.icon,\r\n          append = _props.append,\r\n          prepend = _props.prepend,\r\n          onIconClick = _props.onIconClick,\r\n          popperClass = _props.popperClass;\r\n      var _state = this.state,\r\n          inputValue = _state.inputValue,\r\n          suggestions = _state.suggestions;\r\n\r\n\r\n      return _react2.default.createElement(\r\n        'div',\r\n        { style: this.style(), className: this.className('el-autocomplete') },\r\n        _react2.default.createElement(_input2.default, {\r\n          ref: function ref(node) {\r\n            return _this5.inputNode = node;\r\n          },\r\n          value: inputValue,\r\n          disabled: disabled,\r\n          placeholder: placeholder,\r\n          name: name,\r\n          size: size,\r\n          icon: icon,\r\n          prepend: prepend,\r\n          append: append,\r\n          onIconClick: onIconClick,\r\n          onChange: this.handleChange.bind(this),\r\n          onFocus: this.handleFocus.bind(this),\r\n          onBlur: this.props.onBlur,\r\n          onKeyDown: this.onKeyDown.bind(this)\r\n        }),\r\n        _react2.default.createElement(_Suggestions2.default, {\r\n          ref: function ref(node) {\r\n            return _this5.suggestionsNode = node;\r\n          },\r\n          className: this.classNames(popperClass),\r\n          suggestions: suggestions\r\n        })\r\n      );\r\n    }\r\n  }, {\r\n    key: '__reactstandin__regenerateByEval',\r\n    // @ts-ignore\r\n    value: function __reactstandin__regenerateByEval(key, code) {\r\n      // @ts-ignore\r\n      this[key] = eval(code);\r\n    }\r\n  }]);\r\n  return AutoComplete;\r\n}(_libs.Component);\r\n\r\nAutoComplete.defaultProps = {\r\n  triggerOnFocus: true\r\n};\r\n\r\n\r\nAutoComplete.childContextTypes = {\r\n  component: _libs.PropTypes.any\r\n};\r\n\r\nvar _default = (0, _reactClickOutside2.default)(AutoComplete);\r\n\r\nexports.default = _default;\r\n;\r\n\r\n(function () {\r\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\r\n\r\n  if (!reactHotLoader) {\r\n    return;\r\n  }\r\n\r\n  reactHotLoader.register(AutoComplete, 'AutoComplete', 'src/auto-complete/AutoComplete.jsx');\r\n  reactHotLoader.register(_default, 'default', 'src/auto-complete/AutoComplete.jsx');\r\n})();\r\n\r\n;\r\n\r\n(function () {\r\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\r\n  leaveModule && leaveModule(module);\r\n})();"]},"metadata":{},"sourceType":"script"}